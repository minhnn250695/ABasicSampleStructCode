<!-- DESKTOP BREADSCRUMB -->
<div *ngIf="!isMobile" class="breadcrumb-bar-document padding-top-50 padding-bottom-10">
    <div class="container">
        <a routerLink="/landing">
            <i class="fas fa-home fa-lg margin-right-5"></i>
        </a>
        <i class="fas fa-angle-right margin-right-5"></i>
        <a routerLink="/document/generate-report" class="margin-right-5">Document generator</a>
        <i class="fas fa-angle-right margin-right-5"></i>
        <span class="active-breadcrumb">Template manager</span>
    </div>
</div>

<!-- MOBILE BREADCRUMB -->
<div *ngIf="isMobile" class="breadcrumb-bar-document padding-top-50 margin-top-10 padding-bottom-10">
    <div class="container">
        <a routerLink="/document/generate-report">
            <i class="fas fa-angle-left margin-right-5"></i> Document generator</a>
    </div>
</div>

<!-- DESKTOP SUB-MENU -->
<div *ngIf="!isMobile" class="row sub-menu">
    <div class="container">
        <div class="col-md-12">
            <button type="button" class="btn btn-default pull-right" (click)="uploadTemplate()">
                <i class="fas fa-upload margin-right-5"></i> Upload template</button>
            <button type="button" class="btn btn-default pull-right margin-right-5" (click)="newTemplate()">
                <i class="fas fa-plus margin-right-5"></i> New template</button>

        </div>
    </div>
</div>

<div class="container padding-top-40 padding-bottom-50">
    <div class="col-md-12">
        <h1 class="finpal-h1">Templates</h1>
        <div class="row padding-top-20">
            <div class="col-md-3">
                <div class="row padding-bottom-10">
                    <div class="col-xs-12 col-md-12">
                        <h3 class="finpal-h3 padding-top-10">Quick search</h3>
                        <form class="padding-top-10 padding-bottom-20">
                            <div class="form-group">
                                <input type="text" class="form-control" placeholder="Enter keywords" [(ngModel)]="filters.name" name="search">
                                <button type="button" class="btn btn-info pull-right margin-top-10" (click)="search()">
                                    <i class="fas fa-search"></i> Search
                                </button>
                            </div>
                        </form>
                    </div>

                    <!-- DESKTOP ADVANCED SEARCH -->
                    <div *ngIf="!isMobile" class="col-md-12">
                        <h3 class="finpal-h3 padding-top-50">Filters</h3>
                        <h4 class="finpal-h5 orange">Author</h4>
                        <select class="form-control" [(ngModel)]="filters.author">
                            <option *ngFor="let author of authors" [ngValue]="author.name">{{author.name}}</option>
                        </select>

                        <h4 class="finpal-h5 orange">Period</h4>
                        <form class="form-inline">
                            <div class="form-group">
                                <label class="col-md-2 inline-label" for=""><strong>From</strong></label>
                                <div class="col-md-10 padding-right-0">
                                    <div class="input-group input-append date form_date">
                                        <input class="form-control" [matDatepicker]="periodFromPicker" placeholder="dd/mm/yy" [(ngModel)]="filters.periodFrom" name="periodFrom">
                                        <mat-datepicker #periodFromPicker></mat-datepicker>
                                        <div class="input-group-addon" (click)="periodFromPicker.open()">
                                            <span class="add-on">
                                                <i class="fas fa-calendar fa-lg"></i>
                                            </span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </form>
                        <form class="form-inline padding-top-10">
                            <div class="form-group">
                                <label class="col-md-2 inline-label" for=""><strong>To</strong></label>
                                <div class="col-md-10 padding-right-0">
                                    <div class="input-group input-append date form_date">
                                        <input class="form-control" [matDatepicker]="periodToPicker" placeholder="dd/mm/yy" [(ngModel)]="filters.periodTo" name="periodTo">
                                        <mat-datepicker #periodToPicker></mat-datepicker>
                                        <div class="input-group-addon" (click)="periodToPicker.open()">
                                            <span class="add-on">
                                                <i class="fas fa-calendar fa-lg"></i>
                                            </span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </form>
                        <div class="row">
                            <div class="col-md-12 padding-top-30">
                                <button type="button" class="btn btn-default pull-right" (click)="resetFilters()">Reset</button>
                                <button type="button" class="btn btn-info pull-right margin-right-5" (click)="applyFilters()">Apply</button>
                            </div>
                        </div>
                    </div>

                    <!-- MOBILE ADVANCED SEARCH -->
                    <div *ngIf="isMobile" class="col-xs-12">
                        <a class="finpal-h4 padding-top-20 adv-search" role="button" data-toggle="collapse" href="#collapseExample" aria-expanded="false" aria-controls="collapseExample">
                            <i class="fas fa-caret-circle-right margin-right-5"></i> Advanced search
                        </a>
                        <div class="collapse" id="collapseExample">
                            <div class="well">
                                <h4 class="finpal-h5 padding-top-10 orange">Author</h4>
                                <select class="form-control" [(ngModel)]="filters.author">
                                    <option *ngFor="let author of authors" [ngValue]="author.name">{{author.name}}</option>
                                </select>
                                <h4 class="finpal-h5 padding-top-10 orange">Period</h4>
                                <form>
                                    <div class="form-group">
                                        <label class="control-label small" for="">From</label>
                                        <div class="input-group input-append date form_date">
                                            <input class="form-control" [matDatepicker]="periodFromPicker" placeholder="dd/mm/yy" [(ngModel)]="filters.periodFrom" name="periodFrom">
                                            <mat-datepicker #periodFromPicker></mat-datepicker>
                                            <div class="input-group-addon" (click)="periodFromPicker.open()">
                                                <span class="add-on">
                                                    <i class="fas fa-calendar fa-lg"></i>
                                                </span>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="control-label small" for="">To</label>
                                        <div class="input-group input-append date form_date">
                                            <input class="form-control" [matDatepicker]="periodToPicker" placeholder="dd/mm/yy" [(ngModel)]="filters.periodTo" name="periodTo">
                                            <mat-datepicker #periodToPicker></mat-datepicker>
                                            <div class="input-group-addon" (click)="periodToPicker.open()">
                                                <span class="add-on">
                                                    <i class="fas fa-calendar fa-lg"></i>
                                                </span>
                                            </div>
                                        </div>
                                    </div>
                                </form>
                                <div class="row">
                                    <div class="col-xs-12">
                                        <span class="pull-right">
                                            <button type="button" class="btn btn-info" (click)="applyFilters()">Apply</button>
                                            <button type="button" class="btn btn-default" (click)="resetFilters()">Reset</button>
                                        </span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-9 padding-top-5">
                <div class="table-responsive">
                    <table class="table table-hover table-striped card-client-table table-responsive">
                        <thead>
                            <tr>
                                <th>
                                    <h3 class="finpal-h3">Name</h3>
                                </th>
                                <th>
                                    <h3 class="finpal-h3">Author</h3>
                                </th>
                                <th>
                                    <h3 class="finpal-h3">Date</h3>
                                </th>
                                <th>
                                    <h3 class="finpal-h3">Actions</h3>
                                </th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let template of templates">
                                <td>
                                    <a (click)="editTemplate(template)">
                                        <i class="fas fa-caret-right fa-lg light-orange margin-right-10"></i>{{template.name}}</a>
                                </td>
                                <td>{{template.authorName}}</td>
                                <td>{{template.creationDate | date:'dd/MM/yyyy'}}</td>
                                <td>
                                    <button type="button" class="btn btn-default btn-sm" data-toggle="tooltip" data-placement="top" title="Edit" (click)="editTemplate(template)">
                                        <i class="fas fa-edit fa-lg"></i>
                                    </button>
                                    <button type="button" class="btn btn-default btn-sm" data-toggle="modal" data-target="#confirmDuplicateTemplate" data-placement="top" title="Duplicate" (click)="selectTemplate(template)">
                                        <i class="fas fa-clone fa-lg"></i>
                                    </button>
                                    <button *ngIf="!template.isDefault" type="button" class="btn btn-default btn-sm" data-toggle="modal" data-placement="top" data-target="#confirmDeleteTemplate" title="Delete" (click)="selectTemplate(template)">
                                        <i class="fas fa-trash fa-lg"></i>
                                    </button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>
<div id="confirmDeleteTemplate" class="modal fade" role="dialog">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">Delete Template Confirm</h4>
            </div>
            <div class="modal-body">
                <p>
                    Are you sure you want to delete this template?
                </p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-light-blue" (click)="deleteTemplate()" data-dismiss="modal">DELETE</button>
                <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
            </div>
        </div>
    </div>
</div>
<div id="confirmDuplicateTemplate" class="modal fade" role="dialog">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">Duplicate Template Confirm</h4>
            </div>
            <div class="modal-body">
                <p>
                    Are you sure you want to duplicate this template?
                </p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-light-blue" (click)="duplicateTemplate()" data-dismiss="modal">DUPLICATE</button>
                <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
            </div>
        </div>
    </div>
</div>